{{define "title"}}Assignment: {{.Assignment.Name}}{{end}}
{{define "head"}}{{end}}
{{define "content"}}
    <div class="container pt-3">

        <a href="/course?id={{ .CourseID }}" class="btn btn-outline-dark">Go Back</a>
        {{if .Delivered}}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <strong>Notice!</strong> You have already delivered this assignment!
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        {{end}}
        <h1 class="display-4">
            {{.Assignment.Name}}
        </h1>
        {{if .HasReview}}<span class="badge badge-info">Peer Review</span>{{end}}
        {{if .HasAutoValidation}}<span class="badge badge-warning">Auto Validated</span>{{end}}

        <p class="lead"><strong>Deadline:</strong> {{PRETTYTIME .Assignment.Deadline}}</p>
        <div class="jumbotron">
            {{.Description}}
        </div>
        {{  if .IsDeadlineOver }}
            {{if .HasReview}}
                <a href="#" class="btn btn-info btn-lg">Peer-Review</a>
            {{end}}
        {{else}}
            {{if not .Delivered}}
                <a href="/assignment/submission?id={{ .Assignment.ID }}" class="btn btn-primary btn-lg">Deliver
                    assignment</a>
            {{else}}
                <a href="/assignment/submission?id={{ .Assignment.ID }}" class="btn btn-success btn-lg">Re-Deliver
                    assignment</a>
            {{end}}
        {{end}}
        {{if .HasBeenValidated}}
            <a href="#" class="btn btn-warning btn-lg">See auto validation</a>
        {{end}}

        {{ $id := .Assignment.ID }}
        {{ $length := len .Reviews.Items }}
        {{ if gt $length 0 }}
            {{ range .Reviews.Items }}
                <a href="/assignment/{{$id}}/submission/{{.ID}}" class="btn btn-dark btn-lg">Review {{ .Name }}</a>
            {{ end }}
        {{end }}
    </div>
{{end}}
{{define "foot"}}{{end}}